specVersion: 0.0.2
description: Ourz
repository:
schema:
  file: ./src/schema.graphql
dataSources:
  - kind: ethereum/contract
    name: OurFactory
    network: rinkeby
    source:
      address: "{{OurFactoryAddress}}"
      abi: OurFactory
      startBlock: 1
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/mappings/factory.ts
      entities:
        - OurFactory
      abis:
        - name: OurFactory
          file: ./abis/OurFactory.json
      eventHandlers:
        - event: ProxyCreated(address,address,string)
          handler: handleProxyCreated
  - kind: ethereum/contract
    name: OurSplitter
    network: rinkeby
    source:
      address: "{{OurSplitterAddress}}"
      abi: OurSplitter
      startBlock: 1
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/mappings/splitter.ts
      entities:
        - OurSplitter
      abis:
        - name: OurSplitter
          file: ./abis/OurSplitter.json
      eventHandlers:
        - event: TransferETH(address,uint256,bool)
          handler: handleTransferETH
        - event: WindowIncremented(uint256,uint256)
          handler: handleWindowIncremented
  # - kind: ethereum/contract
  #   name: OurMinter
  #   network: rinkeby
  #   source:
  #     address: "{{OurMinterAddress}}"
  #     abi: OurMinter
  #     startBlock: 1
  #   mapping:
  #     kind: ethereum/events
  #     apiVersion: 0.0.4
  #     language: wasm/assemblyscript
  #     entities:
  #       - OurMinter
  #     abis:
  #       - name: OurMinter
  #         file: ./abis/OurMinter.json
  #     eventHandlers:
  #       - event: SetPurpose(address,string)
  #         handler: handleSetPurpose
  #     file: ./minter.ts
templates:
  - name: OurProxy
    kind: ethereum/contract
    network: rinkeby
    source:
      abi: OurProxy
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/mappings/proxy.ts
      entities:
        - OurProxy
      abis:
        - name: OurProxy
          file: ./abis/OurProxy.json
        - name: OurSplitter
          file: ./abis/OurSplitter.json
        - name: OurMinter
          file: ./abis/OurMinter.json
      eventHandlers:
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
        - event: TokenReceived(address,address,uint256,bytes)
          handler: handleTokenReceived
        - event: ETHReceived(address,address,uint256)
          handler: handleETHReceived
